g1<-graf1+ggtitle("Závislost velikosti snůšky na typu hnízda")+guides(fill=FALSE)+theme(plot.title = element_text(hjust = 0.5))
g2<-graf2+labs(color="Typ hnízda")+theme(legend.justification=c(1,1), legend.position=c(1,1))+ggtitle("Závislost velikosti snůšky na hmotnosti a typu hnízda")+theme(plot.title = element_text(hjust = 0.5))
library(gridExtra)
grid.arrange(g1, g2, nrow=2)
grid.arrange(g1, g2, ncol=2)
graf2<-qplot(log(body.mass), clutch, data=cowbirds, geom=c("point", "smooth"),
method="lm", color=nest.type, xlab="Log hmotnost (g)", ylab="Velikost snůšky",fill=NA)
g2<-graf2+labs(color="Typ hnízda")+theme(legend.justification=c(1,1), legend.position=c(1,1))+ggtitle("Závislost velikosti snůšky na hmotnosti a typu hnízda")+theme(plot.title = element_text(hjust = 0.5))
grid.arrange(g1, g2, ncol=2)
graf2<-qplot(log(body.mass), clutch, data=cowbirds, geom=c("point", "smooth"),
method="lm", color=nest.type, xlab="Log hmotnost (g)", ylab="Velikost snůšky")
g1<-graf1+ggtitle("Závislost velikosti snůšky na typu hnízda")+guides(fill=FALSE)+theme(plot.title = element_text(hjust = 0.5))
g2<-graf2+labs(color="Typ hnízda")+theme(legend.justification=c(1,1), legend.position=c(1,1))+ggtitle("Závislost velikosti snůšky na hmotnosti a typu hnízda")+theme(plot.title = element_text(hjust = 0.5))
grid.arrange(g1, g2, ncol=2)
graf2<-qplot(log(body.mass), clutch, data=cowbirds, geom=c("point", "smooth"),
method="lm", color=nest.type, xlab="Log hmotnosti (g)", ylab="Velikost snůšky")
g1<-graf1+ggtitle("Závislost velikosti snůšky na typu hnízda")+guides(fill=FALSE)+theme(plot.title = element_text(hjust = 0.5))
g2<-graf2+labs(color="Typ hnízda")+theme(legend.justification=c(1,1), legend.position=c(1,1))+ggtitle("Závislost velikosti snůšky na hmotnosti a typu hnízda")+theme(plot.title = element_text(hjust = 0.5))
grid.arrange(g1, g2, ncol=2)
devtools::install_github("tylermorganwall/rayshader")
install.packages("devtools")
devtools::install_github("tylermorganwall/rayshader")
devtools::install_github("tylermorganwall/rayshader")
pkgbuild::check_build_tools(debug = TRUE)
devtools::install_github("tylermorganwall/rayshader")
library(rayshader)
packages.install("rayshader")
install.packages("rayshader")
library(rayshader)
#Here, I load a map with the raster package.
loadzip = tempfile()
download.file("https://tylermw.com/data/dem_01.tif.zip", loadzip)
localtif = raster::raster(unzip(loadzip, "dem_01.tif"))
unlink(loadzip)
#And convert it to a matrix:
elmat = raster_to_matrix(localtif)
#We use another one of rayshader's built-in textures:
elmat %>%
sphere_shade(texture = "desert") %>%
plot_map()
library(rayshader)
#Here, I load a map with the raster package.
loadzip = tempfile()
download.file("https://tylermw.com/data/dem_01.tif.zip", loadzip)
localtif = raster::raster(unzip(loadzip, "dem_01.tif"))
unlink(loadzip)
#And convert it to a matrix:
elmat = raster_to_matrix(localtif)
#We use another one of rayshader's built-in textures:
elmat %>%
sphere_shade(texture = "forest") %>%
plot_map()
library(rayshader)
#Here, I load a map with the raster package.
loadzip = tempfile()
download.file("https://tylermw.com/data/dem_01.tif.zip", loadzip)
localtif = raster::raster(unzip(loadzip, "dem_01.tif"))
unlink(loadzip)
#And convert it to a matrix:
elmat = raster_to_matrix(localtif)
#We use another one of rayshader's built-in textures:
elmat %>%
sphere_shade(texture = "unicorn") %>%
plot_map()
library(rayshader)
#Here, I load a map with the raster package.
loadzip = tempfile()
download.file("https://tylermw.com/data/dem_01.tif.zip", loadzip)
localtif = raster::raster(unzip(loadzip, "dem_01.tif"))
unlink(loadzip)
#And convert it to a matrix:
elmat = raster_to_matrix(localtif)
#We use another one of rayshader's built-in textures:
elmat %>%
sphere_shade(texture = "imhof2") %>%
plot_map()
library(rayshader)
#Here, I load a map with the raster package.
loadzip = tempfile()
download.file("https://tylermw.com/data/dem_01.tif.zip", loadzip)
localtif = raster::raster(unzip(loadzip, "dem_01.tif"))
unlink(loadzip)
#And convert it to a matrix:
elmat = raster_to_matrix(localtif)
#We use another one of rayshader's built-in textures:
elmat %>%
sphere_shade(texture = "desert") %>%
add_water(detect_water(elmat), color = "desert") %>%
add_shadow(ray_shade(elmat, zscale = 3), 0.5) %>%
add_shadow(ambient_shade(elmat), 0) %>%
plot_3d(elmat, zscale = 10, fov = 0, theta = 135, zoom = 0.75, phi = 45, windowsize = c(1000, 800))
elmat %>%
sphere_shade(texture = "desert") %>%
add_water(detect_water(elmat), color = "lightblue") %>%
add_shadow(cloud_shade(elmat, zscale = 10, start_altitude = 500, end_altitude = 1000,), 0) %>%
plot_3d(elmat, zscale = 10, fov = 0, theta = 135, zoom = 0.75, phi = 45, windowsize = c(1000, 800),
background="darkred")
library(rayshader)
#Here, I load a map with the raster package.
loadzip = tempfile()
download.file("https://tylermw.com/data/dem_01.tif.zip", loadzip)
localtif = raster::raster(unzip(loadzip, "dem_01.tif"))
unlink(loadzip)
#And convert it to a matrix:
elmat = raster_to_matrix(localtif)
#We use another one of rayshader's built-in textures:
elmat %>%
sphere_shade(texture = "desert") %>%
add_water(detect_water(elmat), color = "lightblue") %>%
add_shadow(cloud_shade(elmat, zscale = 10, start_altitude = 500, end_altitude = 1000,), 0) %>%
plot_3d(elmat, zscale = 10, fov = 0, theta = 135, zoom = 0.75, phi = 45, windowsize = c(1000, 800),
background="darkred")
install.packages(rayrender)
install.packages("rayrender")
install.packages("rayshader")
install.packages("rayshader")
library(rayshader)
#Here, I load a map with the raster package.
loadzip = tempfile()
download.file("https://tylermw.com/data/dem_01.tif.zip", loadzip)
localtif = raster::raster(unzip(loadzip, "dem_01.tif"))
unlink(loadzip)
#And convert it to a matrix:
elmat = raster_to_matrix(localtif)
#We use another one of rayshader's built-in textures:
elmat %>%
sphere_shade(texture = "desert") %>%
add_water(detect_water(elmat), color = "lightblue") %>%
add_shadow(cloud_shade(elmat, zscale = 10, start_altitude = 500, end_altitude = 1000,), 0) %>%
plot_3d(elmat, zscale = 10, fov = 0, theta = 135, zoom = 0.75, phi = 45, windowsize = c(1000, 800),
background="darkred")
install.packages("remotes")
remotes::install_github("tylermorganwall/rayshader")
library(rayshader)
#Here, I load a map with the raster package.
loadzip = tempfile()
download.file("https://tylermw.com/data/dem_01.tif.zip", loadzip)
localtif = raster::raster(unzip(loadzip, "dem_01.tif"))
unlink(loadzip)
#And convert it to a matrix:
elmat = raster_to_matrix(localtif)
#We use another one of rayshader's built-in textures:
elmat %>%
sphere_shade(texture = "desert") %>%
add_water(detect_water(elmat), color = "lightblue") %>%
add_shadow(cloud_shade(elmat, zscale = 10, start_altitude = 500, end_altitude = 1000,), 0) %>%
plot_3d(elmat, zscale = 10, fov = 0, theta = 135, zoom = 0.75, phi = 45, windowsize = c(1000, 800),
background="darkred")
view(iris)
View(iris)
pairs(iris)
pairs(iris, col=iris$Species)
install.packages("rethinking")
install.packages(c("BH", "brew", "brio", "cli", "coda", "commonmark", "compositions", "cpp11", "curl", "data.table", "datamods", "DBI", "desc", "digest", "e1071", "esquisse", "expm", "fansi", "fftw", "fpc", "future", "gdtools", "geometries", "gert", "ggrepel", "glue", "haven", "htmlwidgets", "httpuv", "igraph", "insight", "later", "listenv", "magick", "maps", "markdown", "nanoarrow", "patchwork", "phytools", "pkgbuild", "pkgload", "plotly", "processx", "progress", "proj4", "ps", "R.oo", "ragg", "raster", "rayimage", "rayrender", "rayvertex", "Rcpp", "RCurl", "readr", "reprex", "rlang", "robustbase", "roxygen2", "s2", "sandwich", "sass", "sf", "sfheaders", "shinyWidgets", "sp", "stringi", "terra", "testthat", "tidyr", "timechange", "uuid", "vctrs", "viridis", "vroom", "warbleR", "withr", "xml2", "yaml", "zip"))
install.packages(c("BH", "brew", "brio", "cli", "coda", "commonmark", "compositions", "cpp11", "curl", "data.table", "datamods", "DBI", "desc", "digest", "e1071", "esquisse", "expm", "fansi", "fftw", "fpc", "future", "gdtools", "geometries", "gert", "ggrepel", "glue", "haven", "htmlwidgets", "httpuv", "igraph", "insight", "later", "listenv", "magick", "maps", "markdown", "nanoarrow", "patchwork", "phytools", "pkgbuild", "pkgload", "plotly", "processx", "progress", "proj4", "ps", "R.oo", "ragg", "raster", "rayimage", "rayrender", "rayvertex", "Rcpp", "RCurl", "readr", "reprex", "rlang", "robustbase", "roxygen2", "s2", "sandwich", "sass", "sf", "sfheaders", "shinyWidgets", "sp", "stringi", "terra", "testthat", "tidyr", "timechange", "uuid", "vctrs", "viridis", "vroom", "warbleR", "withr", "xml2", "yaml", "zip"))
install.packages(c("BH", "brew", "brio", "cli", "coda", "commonmark", "compositions", "cpp11", "curl", "data.table", "datamods", "DBI", "desc", "digest", "e1071", "esquisse", "expm", "fansi", "fftw", "fpc", "future", "gdtools", "geometries", "gert", "ggrepel", "glue", "haven", "htmlwidgets", "httpuv", "igraph", "insight", "later", "listenv", "magick", "maps", "markdown", "nanoarrow", "patchwork", "phytools", "pkgbuild", "pkgload", "plotly", "processx", "progress", "proj4", "ps", "R.oo", "ragg", "raster", "rayimage", "rayrender", "rayvertex", "Rcpp", "RCurl", "readr", "reprex", "rlang", "robustbase", "roxygen2", "s2", "sandwich", "sass", "sf", "sfheaders", "shinyWidgets", "sp", "stringi", "terra", "testthat", "tidyr", "timechange", "uuid", "vctrs", "viridis", "vroom", "warbleR", "withr", "xml2", "yaml", "zip"))
# Load reticulate library
library(reticulate)
library(dplyr)
library(stringr)
use_virtualenv("E:/SYNC/PROJECTS/scraping/venv")
use_virtualenv("/E:/SYNC/PROJECTS/scraping/venv")
use_virtualenv("E:/SYNC/PROJECTS/scraping/venv")
use_virtualenv("C:\Users\adamu\env")
# Load reticulate library
library(reticulate)
library(dplyr)
library(stringr)
use_virtualenv("C:\Users\adamu\env")
use_virtualenv("C:/Users/adamu/env")
# Function to extract methods chapter from text
extract_methods <- function(text, method_keywords) {
methods_sections <- list()
for (keyword in method_keywords) {
pattern <- paste0("(?i)\\b", keyword, "\\b.+?(?=^(?:\\w|Discussion|Results|$))")
matches <- stringr::str_extract_all(text, pattern)
methods_sections <- c(methods_sections, matches)
}
return(methods_sections)
}
# Function to extract tables from PDF
extract_tables <- function(pdf_path) {
tabula <- import("tabula")
tables <- tabula$read_pdf(pdf_path, pages = "all", multiple_tables = TRUE, silent = TRUE)
return(tables)
}
# Function to save all tables from a PDF to separate CSV files
save_all_tables_to_csv <- function(tables, csv_prefix) {
for (idx in seq_along(tables)) {
csv_file <- paste0(csv_prefix, "_table_", idx, ".csv")
if (!is.null(tables[[idx]])) {
write.csv(tables[[idx]], csv_file, row.names = FALSE)
cat("Table", idx, "saved to", csv_file, "\n")
} else {
cat("Table", idx, "is empty. CSV not saved.\n")
}
}
}
# Function to save methods chapter to a text file
save_methods_to_text <- function(methods_text, txt_file) {
if (length(methods_text) > 0) {
methods_text <- paste(methods_text, collapse = "\n\n")
cat(methods_text, file = txt_file)
cat("Methods chapter saved to", txt_file, "\n")
} else {
cat("No methods chapter found in the PDF. Text file not saved.\n")
}
}
# Main function to process PDFs and extract tables and methods
process_pdfs_and_extract_tables_and_methods <- function(folder_path, method_keywords) {
for (filename in list.files(folder_path, pattern = "\\.pdf$", full.names = TRUE)) {
# Create a folder for each PDF's content
scrape_folder <- paste0(dirname(filename), "/", gsub(".pdf", "_scrape", basename(filename)))
dir.create(scrape_folder, showWarnings = FALSE)
# Extract tables from the PDF
tables <- extract_tables(filename)
# Save all tables to separate CSV files
save_all_tables_to_csv(tables, paste0(scrape_folder, "/", gsub(".pdf", "", basename(filename))))
# Extract methods chapter from PDF text
text <- readLines(filename)
methods_text <- extract_methods(text, method_keywords)
# Save methods chapter to a text file
methods_txt_file <- paste0(scrape_folder, "/methods.txt")
save_methods_to_text(methods_text, methods_txt_file)
}
}
# Example usage:
folder_path <- "E:/SYNC/DP/papers/test"
method_keywords <- c("methods", "methodology", "experimental procedures", "method")
process_pdfs_and_extract_tables_and_methods(folder_path, method_keywords)
process_pdfs_and_extract_tables_and_methods(folder_path, method_keywords)
# Load required libraries
library(tabulizer)
install.packages("tabulizer")
# Load required libraries
library(tabulizer)
install.packages("tabula")
use_virtualenv("C:/Users/adamu/.conda/envs/venv1")
use_condaenv("C:/Users/adamu/.conda/envs/venv1")
# Load reticulate library
library(reticulate)
library(dplyr)
library(stringr)
use_condaenv("C:/Users/adamu/.conda/envs/venv1")
# Function to extract methods chapter from text
extract_methods <- function(text, method_keywords) {
methods_sections <- list()
for (keyword in method_keywords) {
pattern <- paste0("(?i)\\b", keyword, "\\b.+?(?=^(?:\\w|Discussion|Results|$))")
matches <- stringr::str_extract_all(text, pattern)
methods_sections <- c(methods_sections, matches)
}
return(methods_sections)
}
# Function to extract tables from PDF
extract_tables <- function(pdf_path) {
tabula <- import("tabula")
tables <- tabula$read_pdf(pdf_path, pages = "all", multiple_tables = TRUE, silent = TRUE)
return(tables)
}
# Function to save all tables from a PDF to separate CSV files
save_all_tables_to_csv <- function(tables, csv_prefix) {
for (idx in seq_along(tables)) {
csv_file <- paste0(csv_prefix, "_table_", idx, ".csv")
if (!is.null(tables[[idx]])) {
write.csv(tables[[idx]], csv_file, row.names = FALSE)
cat("Table", idx, "saved to", csv_file, "\n")
} else {
cat("Table", idx, "is empty. CSV not saved.\n")
}
}
}
# Function to save methods chapter to a text file
save_methods_to_text <- function(methods_text, txt_file) {
if (length(methods_text) > 0) {
methods_text <- paste(methods_text, collapse = "\n\n")
cat(methods_text, file = txt_file)
cat("Methods chapter saved to", txt_file, "\n")
} else {
cat("No methods chapter found in the PDF. Text file not saved.\n")
}
}
# Main function to process PDFs and extract tables and methods
process_pdfs_and_extract_tables_and_methods <- function(folder_path, method_keywords) {
for (filename in list.files(folder_path, pattern = "\\.pdf$", full.names = TRUE)) {
# Create a folder for each PDF's content
scrape_folder <- paste0(dirname(filename), "/", gsub(".pdf", "_scrape", basename(filename)))
dir.create(scrape_folder, showWarnings = FALSE)
# Extract tables from the PDF
tables <- extract_tables(filename)
# Save all tables to separate CSV files
save_all_tables_to_csv(tables, paste0(scrape_folder, "/", gsub(".pdf", "", basename(filename))))
# Extract methods chapter from PDF text
text <- readLines(filename)
methods_text <- extract_methods(text, method_keywords)
# Save methods chapter to a text file
methods_txt_file <- paste0(scrape_folder, "/methods.txt")
save_methods_to_text(methods_text, methods_txt_file)
}
}
# Example usage:
folder_path <- "E:/SYNC/DP/papers/test"
method_keywords <- c("methods", "methodology", "experimental procedures", "method")
process_pdfs_and_extract_tables_and_methods(folder_path, method_keywords)
install.packages("tabula")
# Load required libraries
library(tabula)
# Function to extract tables from PDF using tabula
extract_tables <- function(pdf_path) {
tables <- tabula::extract_pages(pdf_path, output = "data.frame")
return(tables)
}
# Main function to process PDFs and extract tables
process_pdfs_and_extract_tables <- function(folder_path) {
for (filename in list.files(folder_path, pattern = "\\.pdf$", full.names = TRUE)) {
# Extract tables from the PDF
tables <- extract_tables(filename)
# Print the extracted tables
print(tables)
}
}
# Example usage:
folder_path <- "path_to_your_folder"
process_pdfs_and_extract_tables(folder_path)
View(extract_methods)
library(NSNSDAcoustics)
up_east <- birdnet_gather(
results.directory = 'E:/SYNC/WORK_CZU/res_SMU05982_up_east',
formatted = F
)
View(up_east)
# format data
birdnet_format(results.directory = 'E:/SYNC/WORK_CZU/res_SMU05982_up_east')
# format data
birdnet_format(results.directory = 'E:/SYNC/WORK_CZU/res_SMU05982_up_east', timezone=Europe/Prague)
# format data
birdnet_format(results.directory = 'E:/SYNC/WORK_CZU/res_SMU05982_up_east', timezone=CEST)
# format data
birdnet_format(results.directory = 'E:/SYNC/WORK_CZU/res_SMU05982_up_east', timezone="CEST")
up_east <- birdnet_gather(
results.directory = 'E:/SYNC/WORK_CZU/res_SMU05982_up_east',
formatted = T
)
View(up_east)
?birdnet_verifgy
?birdnet_verify
setwd(dirname(getActiveDocumentContext()$path))
#packages_to_install <- c("tidyverse", "ape", "vegan", "png","dendextend", "readxl", "patchwork", "treemap", "plotly")
#install.packages(packages_to_install)
library(tidyverse)
library(readxl)
library(vegan)
library(dendextend)
library(ape)
library(patchwork)
library(rstudioapi)
library(treemap)
library(ggrepel)
setwd(dirname(getActiveDocumentContext()$path))
data_all <- read_excel("./data/behav_data_23.xlsx")
data_bodovka <- read_excel("./data/bodovka_data_23.xlsx")
data_23 <- read_excel("./data/behav_data_23.xlsx")
data_bodovka <- read_excel("./data/bodovka_data_23.xlsx")
data_lit<-read_excel("./data/literature_data.xlsx")
data_23 <- read_excel("./data/behav_data_23.xlsx")
data_bodovka <- read_excel("./data/bodovka_data_23.xlsx")
data_lit<-read_excel("./data/literature_data.xlsx")
wd?
packages_to_install <- c("tidyverse", "ape", "vegan", "png","dendextend", "readxl", "patchwork", "treemap", "rtapas")
install.packages(packages_to_install)
install.packages(packages_to_install)
install.packages("Rtapas")
library(Rtapas)
data_24 <- read_excel("./data/behav_data_24.xlsx")
data_23 <- read_excel("./data/behav_data_23.xlsx")
### behavior, delete empty observations, unite columns into species, pivot to long format
data_behav_23 <- data_23 %>%
filter(!is.na(behavior_1)) %>%
unite(col = "druh", genus, species, sep = "_", remove = TRUE) %>%
pivot_longer(cols = c("behavior_1", "behavior_2", "behavior_3", "behavior_4", "behavior_5"),
names_to = "x", values_to = "behav") %>%
select(druh, behav, line ) %>%
na.omit()
data_behav_24 <- data_24 %>%
filter(!is.na(behavior_1)) %>%
unite(col = "druh", genus, species, sep = "_", remove = TRUE) %>%
pivot_longer(cols = c("behavior_1", "behavior_2", "behavior_3", "behavior_4", "behavior_5"),
names_to = "x", values_to = "behav") %>%
select(druh, behav, line ) %>%
na.omit()
View(data_behav_24)
View(data_24)
data_24 <- read_excel("./data/behav_data_24.xlsx")
data_behav_24 <- data_24 %>%
filter(!is.na(behavior_1)) %>%
unite(col = "druh", genus, species, sep = "_", remove = TRUE) %>%
pivot_longer(cols = c("behavior_1", "behavior_2", "behavior_3", "behavior_4", "behavior_5"),
names_to = "x", values_to = "behav") %>%
select(druh, behav, line ) %>%
na.omit()
View(data_behav_23)
View(data_behav_24)
### substrate, delete empty observations, unite columns into species, pivot to long format
data_substrate_23 <- data_23 %>%
filter(!is.na(behavior_1)) %>%
unite(col = "druh", genus, species, sep = "_", remove = TRUE) %>%
pivot_longer(cols = c("substrate_main_1", "substrate_main_2", "substrate_main_3",
"substrate_main_4", "substrate_main_5"), names_to = "x", values_to = "substrate") %>%
select(druh, line, substrate) %>%
na.omit(F)
data_substrate_24 <- data_24 %>%
filter(!is.na(behavior_1)) %>%
unite(col = "druh", genus, species, sep = "_", remove = TRUE) %>%
pivot_longer(cols = c("substrate_main_1", "substrate_main_2", "substrate_main_3",
"substrate_main_4", "substrate_main_5"), names_to = "x", values_to = "substrate") %>%
select(druh, line, substrate) %>%
na.omit(F)
data_lit_behav <- data_lit %>%
select(species_orig,flycatch,glean,hover_snatch,snatch,pounce, probe)%>%
pivot_longer(cols=c("flycatch","glean","hover_snatch","snatch","pounce", "probe"), names_to="behav",values_to="x")
data_lit_substrate <- data_lit %>%
select(species_orig, air, bark, flower, ground, leaf, other)%>%
pivot_longer(cols=c("air","bark","flower","ground","leaf","other"), names_to="substrate",values_to="x")
### point transect, unite columns, remove non-oscines, count observations
data_bodovka_sp <- data_bodovka %>%
unite(col = "druh", Genus, Species, sep= "_", remove =TRUE) %>%
group_by(Datum, druh)%>%
filter(!(druh=="Columba_oenas"| druh=="Columba_palumbus"| druh=="Buteo_buteo"| druh=="Cuculus_canorus"| druh=="Corvus_corax"| druh=="Dryocopus_martius"| druh=="Dendrocopos_medius"| druh=="Dendrocopos_major"| druh=="Garrulus_glandarius"))%>%
count()
data_freq_behav <- data_behav_23%>%
group_by(druh)%>%
count()%>%
summarise(n)%>%
mutate(prop_behav=proportions(n))
treemap_bodovka<-treemap(data_freq_bodovka,
index="druh",
vSize="n",
type="index",
title="freq point transect"
)
data_freq_bodovka<- data_bodovka %>%
unite(col = "druh", Genus, Species, sep= "_", remove =TRUE) %>%
group_by(druh)%>%
filter(!(druh=="Columba_oenas"| druh=="Columba_palumbus"| druh=="Buteo_buteo"| druh=="Cuculus_canorus"| druh=="Corvus_corax"| druh=="Dryocopus_martius"| druh=="Dendrocopos_medius"| druh=="Dendrocopos_major"| druh=="Garrulus_glandarius"))%>%
count()%>%
summarise(n)%>%
mutate(prop_bodovka = proportions(n))
data_freq_behav <- data_behav_23%>%
group_by(druh)%>%
count()%>%
summarise(n)%>%
mutate(prop_behav=proportions(n))
treemap_bodovka<-treemap(data_freq_bodovka,
index="druh",
vSize="n",
type="index",
title="freq point transect"
)
treemap_behav<-treemap(data_freq_behav,
index="druh",
vSize="n",
type="index",
title="freq obs behav"
)
data_freq_compare<-merge(data_freq_bodovka, data_freq_behav, by="druh", all=TRUE)
## proporce druhu na bodovce vs pozorování
ggplot(data_freq_compare) +
aes(x = prop_behav, y = prop_bodovka) +
geom_point(
shape = "asterisk",
size = 1.45,
colour = "#0C350C"
) +
labs(
x = "Proportion of behavioral observations",
y = "Proportion of observations in point transect"
) +
theme_bw() +
xlim(0, 0.2) +
ylim(0, 0.2) + geom_abline()+ geom_text(label=data_freq_compare$druh)
#zbytecne slozity zpusob výpočtu SR pro behav
species_richness <- data_sp %>%
group_by(line) %>%
summarise(n_distinct(druh))
#procentualni vyuziti substratu
data_substrate_23 %>%
count(substrate) %>%
mutate(percent = n/sum(n)) %>%
select(-n) %>%
spread(substrate, percent)
data_substrate_24 %>%
count(substrate) %>%
mutate(percent = n/sum(n)) %>%
select(-n) %>%
spread(substrate, percent)
data_freq_compare<-merge(data_freq_bodovka, data_freq_behav, by="druh", all=TRUE)
## proporce druhu na bodovce vs pozorování
ggplot(data_freq_compare) +
aes(x = prop_behav, y = prop_bodovka) +
geom_point(
shape = "asterisk",
size = 1.45,
colour = "#0C350C"
) +
labs(
x = "Proportion of behavioral observations",
y = "Proportion of observations in point transect"
) +
theme_bw() +
xlim(0, 0.2) +
ylim(0, 0.2) + geom_abline()+ geom_text(label=data_freq_compare$druh)
View(data_freq_compare)
